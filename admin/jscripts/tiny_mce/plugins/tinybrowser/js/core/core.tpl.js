/*********************************************************************************************
 * MODx PLUGIN: Basic Manager
 * VERSION:     1.0
 * DESCRIPTION: File Manager
 * WRITTEN BY:  Kobezzza (kobezzza@mail.ru)
 * DATE:        29/09/2010
 *
 * Released under the terms and conditions of the
 * GNU General Public License (http://gnu.org).
 *********************************************************************************************/
 
// Шаблон "список"
var templateList = "result += this.Type == 'Cat' ? '<li class=\"cat\"><a href=\"javascript:;\" rel=\"go->cat->' + this.Name + '\">' + this.Name + '</a><a href=\"javascript:;\" rel=\"rename->' + this.Name + '->' + n + '\"><img src=\"images/rename.png\" width=\"13\" height=\"13\" alt=\"' + lng.RENAME + '\" title=\"' + lng.RENAME + '\" /></a><a href=\"javascript:;\" rel=\"delete->cat->' + realPath + this.Name + '->' + n + '\"><img src=\"images/del.png\" width=\"13\" height=\"13\" alt=\"' + lng.DELETE + '\" title=\"' + lng.DELETE + '\" /></a></li>' : this.Type == 'Img' ? '<li class=\"img\"><input name=\"JsonCollection\" type=\"checkbox\" value=\"' + pathType + realPath + this.Name + '.' + this.Format + (resizeThumb == 1 && this.Thumb != 'None' ? '|' + pathType + realPath + '.thumb_user_' + this.Name + '.' + this.Format : '') + '\" /><a href=\"javascript:;\" rel=\"go->img->' + pathType + realPath + this.Name + '.' + this.Format + '->thumb->' + (this.Thumb != 'None' ? pathType + realPath + '.thumb_user_' + this.Name + '.' + this.Format : 'None') + '\">' + this.Name + '.' + this.Format + '</a><a href=\"javascript:;\" rel=\"edit->' + this.Name + '.' + this.Format + '\"><img src=\"images/edit.png\" width=\"13\" height=\"13\" alt=\"' + lng.EDIT + '\" title=\"' + lng.EDIT + '\" /></a><a href=\"javascript:;\" rel=\"rename->' + this.Name + '.' + this.Format + '->' + n + '\"><img src=\"images/rename.png\" width=\"13\" height=\"13\" alt=\"' + lng.RENAME + '\" title=\"' + lng.RENAME + '\" /></a><a href=\"javascript:;\" rel=\"delete->file->' + this.Name + '.' + this.Format + '->' + n + '\"><img src=\"images/del.png\" width=\"13\" height=\"13\" alt=\"' + lng.DELETE + '\" title=\"' + lng.DELETE + '\" /></a></li>' : '<li class=\"' + (this.Format == 'avi' || this.Format == 'wmv' || this.Format == 'flv' || this.Format == 'mpg' || this.Format == 'mpeg' || this.Format == 'rm' || this.Format == 'swf' || this.Format == 'mov' || this.Format == 'mkv' || this.Format == 'ogg' ? 'media' : this.Format == 'mp3' || this.Format == 'wav' || this.Format == 'wma' ? 'audio' : this.Format == 'html' || this.Format == 'htm' || this.Format == 'json' || this.Format == 'css' ? 'html' : this.Format == 'zip'|| this.Format == 'rar' || this.Format == '7z' || this.Format == 'arj' ? 'zip' : this.Format == 'bmp' ? 'img' : 'file') + ' \"><input name=\"JsonCollection\" type=\"checkbox\" value=\"' + pathType + realPath + this.Name + '.' + this.Format + '\" /><a href=\"javascript:;\" rel=\"go->file->' + pathType + realPath + this.Name + '.' + this.Format + '\">' + this.Name + '.' + this.Format + '</a><a href=\"javascript:;\" rel=\"rename->' +  this.Name + '.' + this.Format + '->' + n + '\"><img src=\"images/rename.png\" width=\"13\" height=\"13\" alt=\"' + lng.RENAME + '\" title=\"' + lng.RENAME + '\" /></a><a href=\"javascript:;\" rel=\"delete->file->' + this.Name + '.' + this.Format + '->' + n + '\"><img src=\"images/del.png\" width=\"13\" height=\"13\" alt=\"' + lng.DELETE + '\" title=\"' + lng.DELETE + '\" /></a></li>'";

// Шаблон "плитка"
var templatePlate = "result += this.Type == 'Cat' ? '<div class=\"plate\"><a href=\"javascript:;\" rel=\"go->cat->' + this.Name + '\"><img src=\"images/folder.png\" width=\"128\" height=\"128\" /></a><div class=\"center\"><a href=\"javascript:;\" rel=\"go->cat->' + this.Name + '\" title=\"' + this.Name + '\">' + (rewriteName == 0 ? this.Name : this.Name.length > rewriteWidth ? this.Name.substring(0, rewriteWidth - 3) + '...' : this.Name) + '</a><a href=\"javascript:;\" rel=\"rename->' + this.Name + '->' + n + '\"><img src=\"images/rename.png\" width=\"13\" height=\"13\" alt=\"' + lng.RENAME + '\" title=\"' + lng.RENAME + '\" /></a><a href=\"javascript:;\" rel=\"delete->cat->' + realPath + this.Name + '->' + n + '\"><img src=\"images/del.png\" width=\"13\" height=\"13\" alt=\"' + lng.DELETE + '\" title=\"' + lng.DELETE + '\" /></a></div></div>' : this.Type == 'Img' ? '<div class=\"plate\"><a href=\"javascript:;\" rel=\"go->img->' + pathType + realPath + this.Name + '.' + this.Format + '->thumb->' + (this.Thumb != 'None' ? pathType + realPath + '.thumb_user_' + this.Name + '.' + this.Format : 'None') + '\"><img src=\"' + pathType + realPath + '.thumb_' + this.Name + '.jpg?rand=' + Math.floor(Math.random() * 101) + '\" /></a><div class=\"center\"><input name=\"JsonCollection\" type=\"checkbox\" value=\"' + pathType + realPath + this.Name + '.' + this.Format + (resizeThumb == 1 && this.Thumb != 'None' ? '|' + pathType + realPath + '.thumb_user_' + this.Name + '.' + this.Format : '') + '\" /><a href=\"javascript:;\" rel=\"go->img->' + pathType + realPath + this.Name + '.' + this.Format + '->thumb->' + (this.Thumb != 'None' ? pathType + realPath + '.thumb_user_' + this.Name + '.' + this.Format : 'None') + '\" title=\"' + this.Name + '.' + this.Format + '\">' + (rewriteName == 0 ? this.Name + '.' + this.Format : (this.Name + '.' + this.Format).length > rewriteWidth ? this.Name.substring(0, rewriteWidth - 3) + '...' : this.Name + '.' + this.Format) + '</a><a href=\"javascript:;\" rel=\"edit->' + this.Name + '.' + this.Format + '\"><img src=\"images/edit.png\" width=\"13\" height=\"13\" alt=\"' + lng.EDIT + '\" title=\"' + lng.EDIT + '\" /></a><a href=\"javascript:;\" rel=\"rename->' + this.Name + '.' + this.Format + '->' + n + '\"><img src=\"images/rename.png\" width=\"13\" height=\"13\" alt=\"' + lng.RENAME + '\" title=\"' + lng.RENAME + '\" /></a><a href=\"javascript:;\" rel=\"delete->file->' + this.Name + '.' + this.Format + '->' + n + '\"><img src=\"images/del.png\" width=\"13\" height=\"13\" alt=\"' + lng.DELETE + '\" title=\"' + lng.DELETE + '\" /></a></div></div>' : '<div class=\"plate\"><a href=\"javascript:;\" rel=\"go->file->' + pathType + realPath + this.Name + '.' + this.Format + '\"><img src=\"images/' + (this.Format == 'avi' || this.Format == 'wmv' || this.Format == 'flv' || this.Format == 'mpg'  || this.Format == 'mpeg' || this.Format == 'rm' || this.Format == 'swf' || this.Format == 'mov' || this.Format == 'mkv'  || this.Format == 'ogg' ? 'MediaBig' : this.Format == 'mp3' || this.Format == 'wav' || this.Format == 'wma' ? 'AudioBig' : this.Format == 'html' || this.Format == 'htm' || this.Format == 'json' || this.Format == 'css' ? 'HtmlBig' : this.Format == 'doc'|| this.Format == 'docx' || this.Format == 'xls' || this.Format == 'xlsx' ? 'doc' : 'FileBig') + '.png\" width=\"128\" height=\"128\" /></a><div class=\"center\"><input name=\"JsonCollection\" type=\"checkbox\" value=\"' + pathType + realPath + this.Name + '.' + this.Format + '\" /><a href=\"javascript:;\" rel=\"go->file->' + pathType + realPath + this.Name + '.' + this.Format + '\"  title=\"' + this.Name + '.' + this.Format + '\">' + (rewriteName == 0 ? this.Name + '.' + this.Format : (this.Name + '.' + this.Format).length > rewriteWidth ? this.Name.substring(0, rewriteWidth - 3) + '...' : this.Name + '.' + this.Format) + '</a><a href=\"javascript:;\" rel=\"rename->' + this.Name + '.' + this.Format + '->' + n + '\"><img src=\"images/rename.png\" width=\"13\" height=\"13\" alt=\"' + lng.RENAME + '\" title=\"' + lng.RENAME + '\" /></a><a href=\"javascript:;\" rel=\"delete->file->' + realPath + this.Name + '.' + this.Format + '->' + n + '\"><img src=\"images/del.png\" width=\"13\" height=\"13\" alt=\"' + lng.DELETE + '\" title=\"' + lng.DELETE + '\" /></a></div></div>'";

// Шаблон "таблица"
var templateTable = "result += this.Type == 'Cat' ? '<tr><td><img src=\"images/cat.png\" width=\"16\" height=\"16\" /></td><td><a href=\"javascript:;\" rel=\"go->cat->' + this.Name + '\">' + this.Name + '</a></td><td></td><td>' + pathType + realPath + this.Name + '</td><td><a href=\"javascript:;\" rel=\"rename->' + this.Name + '->' + n + '\"><img src=\"images/rename.png\" width=\"13\" height=\"13\" alt=\"' + lng.RENAME + '\" title=\"' + lng.RENAME + '\" /></a><a href=\"javascript:;\" rel=\"delete->cat->' + realPath + this.Name + '->' + n + '\"><img src=\"images/del.png\" width=\"13\" height=\"13\" alt=\"' + lng.DELETE + '\" title=\"' + lng.DELETE + '\" /></a></td></tr>' : this.Type == 'Img' ? '<tr><td><img src=\"images/img.png\" width=\"16\" height=\"16\" /></td><td><input name=\"JsonCollection\" type=\"checkbox\" value=\"' + pathType + realPath + this.Name + '.' + this.Format + (resizeThumb == 1 && this.Thumb != 'None' ? '|' + pathType + realPath + '.thumb_user_' + this.Name + '.' + this.Format : '') + '\" /><a href=\"javascript:;\" rel=\"go->img->' + pathType + realPath + this.Name + '.' + this.Format + '->thumb->' + (this.Thumb != 'None' ? pathType + realPath + '.thumb_user_' + this.Name + '.' + this.Format : 'None') + '\">' + this.Name + '.' + this.Format + '</a></td><td>' + this.Filesize + '</td><td>' + pathType + realPath + this.Name + '.' + this.Format + '</td><td><a href=\"javascript:;\" rel=\"edit->' + this.Name + '.' + this.Format + '\"><img src=\"images/edit.png\" width=\"13\" height=\"13\" alt=\"' + lng.EDIT + '\" title=\"' + lng.EDIT + '\" /></a><a href=\"javascript:;\" rel=\"rename->' + this.Name + '.' + this.Format + '->' + n + '\"><img src=\"images/rename.png\" width=\"13\" height=\"13\" alt=\"' + lng.RENAME + '\" title=\"' + lng.RENAME + '\" /></a><a href=\"javascript:;\" rel=\"delete->file->' + this.Name + '.' + this.Format + '->' + n + '\"><img src=\"images/del.png\" width=\"13\" height=\"13\" alt=\"' + lng.DELETE + '\" title=\"' + lng.DELETE + '\" /></a></td></tr>' : '<tr><td><img src=\"images/' + (this.Format == 'avi' || this.Format == 'wmv' || this.Format == 'flv' || this.Format == 'mpg' || this.Format == 'mpeg' || this.Format == 'rm' || this.Format == 'swf' || this.Format == 'mov' || this.Format == 'mkv' || this.Format == 'ogg' ? 'media' : this.Format == 'mp3' || this.Format == 'wav' || this.Format == 'wma' ? 'audio' : this.Format == 'html' || this.Format == 'htm' || this.Format == 'json' || this.Format == 'css' ? 'html' : this.Format == 'zip'|| this.Format == 'rar' || this.Format == '7z' || this.Format == 'arj' ? 'zip' : this.Format == 'bmp' ? 'img' : 'file') + '.png\" height=\"16\" width=\"16\" /></td><td><input name=\"JsonCollection\" type=\"checkbox\" value=\"' + pathType + realPath + this.Name + '.' + this.Format + '\" /><a href=\"javascript:;\" rel=\"go->file->' + pathType + realPath + this.Name + '.' + this.Format + '\">' + this.Name + '.' + this.Format + '</a></td><td>' + this.Filesize + '</td><td>' + pathType + realPath + this.Name + '.' + this.Format + '</td><td><a href=\"javascript:;\" rel=\"rename->' +  this.Name + '.' + this.Format + '->' + n + '\"><img src=\"images/rename.png\" width=\"13\" height=\"13\" alt=\"' + lng.RENAME + '\" title=\"' + lng.RENAME + '\" /></a><a href=\"javascript:;\" rel=\"delete->file->' + this.Name + '.' + this.Format + '->' + n + '\"><img src=\"images/del.png\" width=\"13\" height=\"13\" alt=\"' + lng.DELETE + '\" title=\"' + lng.DELETE + '\" /></a></td></tr>'";